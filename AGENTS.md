# Codex Agent Guide

This repository powers Ben Allen’s personal site using Astro (static output). The root `cv.md` is the single source of truth for the CV; a sync script copies it into the site at `/cv` for builds and local dev.

## Goals

- Maintain a high-quality, succinct CV in `cv.md`.
- Keep the structure simple, readable, and consistent across sections.
- Optimize for clarity, impact, and scannability by recruiters.

## Editing Rules

- Use patch-based edits only; reference exact file paths and start lines when relevant.
- Keep the stack minimal: Astro + CSS; avoid adding heavy runtime frameworks unless requested.
- Do not introduce unrelated files or reorganize structure without a clear purpose.
- Preserve existing tone and style unless asked to change it.
- Prefer tight language, strong verbs, measurable outcomes.

## Repository Hygiene

- Single source of truth: edit only `cv.md` at repo root.
- Generated files: do not edit by hand.
  - `src/pages/cv.md` (synced from root `cv.md`)
  - `public/photos/` (copied from `photos/`)
  - `src/images/hero.png` (picked from photos for optimization)
- Source photos live in `photos/` (top-level). The build/dev sync copies them to `public/photos/`.
- Keep docs minimal; planning scratch files (e.g., `plan*.md`, WARP notes) should not live in the repo.

## Format Guidance

- Markdown only; no HTML, images, or footnotes without explicit request.
- Section suggestions:
  - Summary
  - Skills / Technologies
  - Experience (reverse-chronological, with achievements and metrics)
  - Education / Certifications
  - Selected Projects (optional)

## Operability

- Local dev: `npm install`, then `npm run dev`.
- Build: `npm run build` (outputs to `dist/`).
- Docker: build and run using the provided `Dockerfile` (Nginx serves static files). Suitable for Coolify.
- The file `src/pages/cv.md` is generated—edit only the root `cv.md`.

### Generated Assets

- Photo manifest `src/data/photos.json` is generated by the sync script and used by the site.
- If you add new images to `photos/`, run `npm run dev` or `npm run sync` to refresh the manifest and public copies.

### Notes for Agents

- When proposing bulk changes to CV content, offer alternative phrasings first.
- Ask for role targets, seniority, and location preferences if unclear.
- Avoid adding dependencies or changing the build unless explicitly requested.

## When In Doubt

- Ask for clarifications on role targets, seniority, preferred regions, or industries.
- Propose options (e.g., alternate summaries or bullet phrasings) before applying broad changes.
