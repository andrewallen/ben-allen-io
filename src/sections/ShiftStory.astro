---
import data from "../data/shift.json";
const steps = (Array.isArray(data) ? data : []) as Array<{title:string; copy:string; image:string; alt?:string}>;
const first = steps[0];
---
<section class="story" data-story>
  <div class="story-media">
    {first ? (
      <img data-media-img src={`/photos/${first.image}`} alt={first.alt || first.title} loading="eager" decoding="async" />
    ) : (
      <div class="hero-media placeholder" aria-hidden="true"></div>
    )}
  </div>
  <div class="story-steps">
    <div class="story-progress" aria-hidden="true"><div class="fill" data-progress></div></div>
    <ol>
      {steps.map((s, i) => (
        <li class={`step${i===0 ? ' active' : ''}`} data-step data-image={`/photos/${s.image}`}> 
          <h3>{s.title}</h3>
          <p class="muted">{s.copy}</p>
        </li>
      ))}
    </ol>
  </div>
  
</section>
